<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Mousebuttons</title><meta name="description" content="A command-line program that makes it possible to use a system-wide push to talk key in Zoom and other apps. Another program that allows configuring mice with many buttons to have custom chording sequences, such as holding down a side button and scrolling to change volume."/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/a8a23829ab00b4f7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a8a23829ab00b4f7.css" data-n-g=""/><link rel="preload" href="/_next/static/css/bab74c2f662373c3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bab74c2f662373c3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-b7f3493dfbfecbab.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-d81e5f7385263f04.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9ecd8ce3c19ad944.js" defer=""></script><script src="/_next/static/chunks/664-60e06c839f82ba03.js" defer=""></script><script src="/_next/static/chunks/570-921dcd5e8ea5e59b.js" defer=""></script><script src="/_next/static/chunks/pages/projects/%5Bproj_id%5D-bc83cee142fffbcf.js" defer=""></script><script src="/_next/static/r-2YeHyY1pR67kj5RUXRE/_buildManifest.js" defer=""></script><script src="/_next/static/r-2YeHyY1pR67kj5RUXRE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header style="background-image:url(&quot;/icons/mousebuttons.png&quot;)" class="bg-fixed"><div class="bg-gray-800 bg-opacity-90 text-gray-300"><div class="p-4 flex flex-col sm:flex-row"><a class="flex-1 text-white hover:underline inline-block" href="/"><span aria-label="Back to" role="img">&lt;</span> <span>pfg&#x27;s homepage</span></a><h1 class="flex-0 w-max text-2xl font-bold text-white flex justify-items-start items-center">Mousebuttons</h1><div class="flex-1 flex justify-items-start items-center"></div></div><div class="max-w-screen-lg mx-auto"><div class="p-4"><div class="mb-3 flex flex-wrap gap-4"><a class="inline-block p-4 px-8 rounded-md text-white &lt;sm:min-w-max &lt;sm:flex-1 &lt;sm:text-center bg-gray-500" href="https://github.com/pfgithub/mousebuttons" target="_blank" rel="noopener"><div class="inline-block align-bottom text-white"><svg width="24px" height="24px" role="img" viewBox="0 0 24 24"><title>Github</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" fill="#fff"></path></svg></div> <!-- -->Source Code</a></div></div></div></div></header><main class="bg-gray-300 min-h-screen"><div class="max-w-screen-lg mx-auto"><div class="p-4"><p class="mb-3">A command-line program that makes it possible to use a system-wide push <!-- -->to talk key in Zoom and other apps. Another program that allows configuring <!-- -->mice with many buttons to have custom chording sequences, such as holding <!-- -->down a side button and scrolling to change volume.<!-- --> </p><p class="mb-3">Made with<!-- --> <a href="https://ziglang.org/" class="text-blue-700 hover:underline" target="_blank" rel="noopener">Zig</a>, <a href="https://en.wikipedia.org/wiki/Xlib" class="text-blue-700 hover:underline" target="_blank" rel="noopener">Xlib</a></p><div class="markdown-body -mx-4 sm:mx-0 bg-white sm:rounded-xl p-10"><html><head></head><body><div class="markdown-heading"><h2 class="heading-element">mousebuttons:</h2><a id="user-content-mousebuttons" class="anchor" aria-label="Permalink: mousebuttons:" href="https://github.com/pfgithub/mousebuttons/blob/master/#mousebuttons" target="_blank" rel="noopener"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>:: a program to allow mouse button chording. eg when you press a thumb button and scroll, change the volume. or when you press a thumb button and click, make the click release instantly. also allows configuring buttons such as setting a button to both left click and right click at the same time.</p>
<p>usage:</p>
<ul>
<li>edit src/main.zig to do the chording you want</li>
<li><code>zig build mousebuttons</code></li>
<li>find your mouse in <code>xinput</code>
<ul>
<li>make your terminal window bigger so it doesn't wrap. it's split into nice
columns then.</li>
<li>look under "Virtual Core Pointer"</li>
<li>ignore items labeled "Consumer Control"</li>
</ul>
</li>
<li>use <code>xinput --list-props deviceid</code>
</li>
<li>find "Device Node (276). that is the dev input file for the mouse.</li>
<li><code>sudo zig-out/bin/mousebuttons /dev/input/eventXX</code></li>
<li>
<code>xinput set-prop 'pointer:mousebuttons Virtual Input' 'libinput Accel Profile Enabled' '0' '1'</code> (or set it to match the same values as your previous mouse)
<ul>
<li>TODO: consider automatically copying xinput props from the starting mouse</li>
<li>NOTE: the above does not work on one of my computers for some reason. I still have to do that <code>systemsettings5</code> toggle mouse acceleration between 'accelerated' and 'flat'. TODO: figure out what's wrong</li>
</ul>
</li>
</ul>
<p>performance: doesn't noticably impact things. a debug build was like 0.01ms or something. to test, disable mouse grabbing and evtest both event files at once, then check the difference in times. note that this will cause every mouse event you make to happen double so be careful while this is running.</p>
<p>developing: use evtest and stuff</p>
<p>TODO:</p>
<ul>
<li>detect mouse</li>
<li>detect and copy bits (<a href="https://github.com/freedesktop-unofficial-mirror/evtest/blob/b8343ec1124da18bdabcc04809a8731b9e39295d/evtest.c#L996" target="_blank" rel="noopener">https://github.com/freedesktop-unofficial-mirror/evtest/blob/b8343ec1124da18bdabcc04809a8731b9e39295d/evtest.c#L996</a>)</li>
<li>fix speed by default (don't require going into systemsettings5 to fix the mouse speed)</li>
</ul>
<p>long term:</p>
<ul>
<li>config? eg <code>src/config</code>
</li>
<li>keyboard too? for global hotkeys (not sure how to listen for two events at once though)</li>
<li>button scroll emulation like the x one but actually working?</li>
<li>x active window detection</li>
</ul>
<div class="markdown-heading"><h2 class="heading-element">key:</h2><a id="user-content-key" class="anchor" aria-label="Permalink: key:" href="https://github.com/pfgithub/mousebuttons/blob/master/#key" target="_blank" rel="noopener"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>a program to run other programs when certain global hotkeys are pressed</p>
<p>usage:</p>
<ul>
<li>edit src/key.zig to do the things you want</li>
<li><code>zig build run-key</code></li>
</ul>
<p>performance: not tested yet</p>
<p>TODO:</p>
<ul>
<li>send fake keypresses</li>
<li>block keypresses (glhf)</li>
<li>watch the active window</li>
<li>preferrably do those above things with <code>/dev/input</code> instead of through X</li>
<li>although some things need x like moving the mouse to specific coordinates</li>
</ul>
</body></html></div></div></div></main><footer class="bg-gray-600 text-white"><div class="max-w-screen-lg mx-auto"><div class="p-4"><a href="https://github.com/pfgithub/pfgithub.github.com/" target="_blank" rel="noopener" class="underline">Source</a> Â·<!-- --> <a href="https://github.com/pfgithub/pfgithub.github.com/" target="_blank" rel="noopener" class="underline">Edit</a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"proj_id":"mousebuttons","project":{"img":[91,67,"/icons/mousebuttons.png"],"title":"Mousebuttons","body":["A command-line program that makes it possible to use a system-wide push ","to talk key in Zoom and other apps. Another program that allows configuring ","mice with many buttons to have custom chording sequences, such as holding ","down a side button and scrolling to change volume."],"technologies":["zig","xlib"],"github":{"repo":"pfgithub/mousebuttons","branch":"master","file":"README.md"},"site":null},"project_readme":{"text":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003cdiv class=\"markdown-heading\"\u003e\u003ch2 class=\"heading-element\"\u003emousebuttons:\u003c/h2\u003e\u003ca id=\"user-content-mousebuttons\" class=\"anchor\" aria-label=\"Permalink: mousebuttons:\" href=\"https://github.com/pfgithub/mousebuttons/blob/master/#mousebuttons\" target=\"_blank\" rel=\"noopener\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/div\u003e\n\u003cp\u003e:: a program to allow mouse button chording. eg when you press a thumb button and scroll, change the volume. or when you press a thumb button and click, make the click release instantly. also allows configuring buttons such as setting a button to both left click and right click at the same time.\u003c/p\u003e\n\u003cp\u003eusage:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eedit src/main.zig to do the chording you want\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ezig build mousebuttons\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003efind your mouse in \u003ccode\u003exinput\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003emake your terminal window bigger so it doesn't wrap. it's split into nice\ncolumns then.\u003c/li\u003e\n\u003cli\u003elook under \"Virtual Core Pointer\"\u003c/li\u003e\n\u003cli\u003eignore items labeled \"Consumer Control\"\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003euse \u003ccode\u003exinput --list-props deviceid\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003efind \"Device Node (276). that is the dev input file for the mouse.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esudo zig-out/bin/mousebuttons /dev/input/eventXX\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003exinput set-prop 'pointer:mousebuttons Virtual Input' 'libinput Accel Profile Enabled' '0' '1'\u003c/code\u003e (or set it to match the same values as your previous mouse)\n\u003cul\u003e\n\u003cli\u003eTODO: consider automatically copying xinput props from the starting mouse\u003c/li\u003e\n\u003cli\u003eNOTE: the above does not work on one of my computers for some reason. I still have to do that \u003ccode\u003esystemsettings5\u003c/code\u003e toggle mouse acceleration between 'accelerated' and 'flat'. TODO: figure out what's wrong\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eperformance: doesn't noticably impact things. a debug build was like 0.01ms or something. to test, disable mouse grabbing and evtest both event files at once, then check the difference in times. note that this will cause every mouse event you make to happen double so be careful while this is running.\u003c/p\u003e\n\u003cp\u003edeveloping: use evtest and stuff\u003c/p\u003e\n\u003cp\u003eTODO:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003edetect mouse\u003c/li\u003e\n\u003cli\u003edetect and copy bits (\u003ca href=\"https://github.com/freedesktop-unofficial-mirror/evtest/blob/b8343ec1124da18bdabcc04809a8731b9e39295d/evtest.c#L996\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/freedesktop-unofficial-mirror/evtest/blob/b8343ec1124da18bdabcc04809a8731b9e39295d/evtest.c#L996\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003efix speed by default (don't require going into systemsettings5 to fix the mouse speed)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003elong term:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003econfig? eg \u003ccode\u003esrc/config\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003ekeyboard too? for global hotkeys (not sure how to listen for two events at once though)\u003c/li\u003e\n\u003cli\u003ebutton scroll emulation like the x one but actually working?\u003c/li\u003e\n\u003cli\u003ex active window detection\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"markdown-heading\"\u003e\u003ch2 class=\"heading-element\"\u003ekey:\u003c/h2\u003e\u003ca id=\"user-content-key\" class=\"anchor\" aria-label=\"Permalink: key:\" href=\"https://github.com/pfgithub/mousebuttons/blob/master/#key\" target=\"_blank\" rel=\"noopener\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/div\u003e\n\u003cp\u003ea program to run other programs when certain global hotkeys are pressed\u003c/p\u003e\n\u003cp\u003eusage:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eedit src/key.zig to do the things you want\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ezig build run-key\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eperformance: not tested yet\u003c/p\u003e\n\u003cp\u003eTODO:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003esend fake keypresses\u003c/li\u003e\n\u003cli\u003eblock keypresses (glhf)\u003c/li\u003e\n\u003cli\u003ewatch the active window\u003c/li\u003e\n\u003cli\u003epreferrably do those above things with \u003ccode\u003e/dev/input\u003c/code\u003e instead of through X\u003c/li\u003e\n\u003cli\u003ealthough some things need x like moving the mouse to specific coordinates\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\u003c/html\u003e"}},"__N_SSG":true},"page":"/projects/[proj_id]","query":{"proj_id":"mousebuttons"},"buildId":"r-2YeHyY1pR67kj5RUXRE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>